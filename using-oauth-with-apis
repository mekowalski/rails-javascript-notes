API USER AUTHENTICATION
-Current level of Authentication to APIs is at the application level with Client Id and Secret
-It is important, allowing API provider to ensure good usage by any client app
-App-level auth gives access to app-level functions but this doesn't require a User
-Not enough for user to be logged into (said API service) and use the App, API service needs to know that the
 app is action on BEHALF of a user that the user is ALLOWED to that action
-Asking a user to login to (said API service) on every request is a horrible experience
-Security issues would arise logistically in 2 places, with (said API service) and your app


ENTER OAUTH
-Provides a way for one application to authenticate to another on behalf of User by means of revokable,
 expirable token
-Also provides a staandard way for app to tell API service 'Hey this user says we can do things for them'
 explicitly authorizing the application

OAuth Authentication Flow
  1. Request access from provider site(often via a direct form)
  2. Redirect back to app site with a code
  3. Request token from provider using code


CHECKING AUTHENTICATION
-First check if a user has already authenticated with API Service
-Also consider a User will ultimately be logged in if they have access token stored in their session
eg: create logged_in? method in AppCon
    private
      def logged_in?
        !!session[:token]
      end

-Redirect Users to Request Access
-In OAuth flow, a User will need to be directed to the access site
eg: URL
    https://foursquare.com/oauth2/authenticate
        ?client_id=YOUR_CLIENT_ID
        &response_type=code
        &redirect_uri=YOUR_REGISTERED_REDIRECT_URI

-URL passes redirect_uri param to set up with API Service
-Instead of always typing Client Id and Secret, create a .env file to hold key values and restart server
*DOTENV is a great way to keep configuration variables for development but always add it to .gitignore in
 order to keep it private*

-
